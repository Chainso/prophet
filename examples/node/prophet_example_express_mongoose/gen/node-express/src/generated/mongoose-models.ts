// Code generated by prophet-cli. DO NOT EDIT.

import { Schema, model, type Model } from 'mongoose';
import type * as Domain from './domain.js';

export interface OrderDocument extends Record<string, unknown> {
  orderId: string;
  customer: Domain.UserRef;
  totalAmount: number;
  discountCode?: string;
  tags?: string[];
  shippingAddress?: Domain.Address;
  approvedByUserId?: string;
  approvalNotes?: string[];
  approvalReason?: string;
  shippingCarrier?: string;
  shippingTrackingNumber?: string;
  shippingPackageIds?: string[];
  state: Domain.OrderState;
}

const OrderSchema = new Schema<OrderDocument>({
  orderId: { type: String, required: true },
  customer: { type: Schema.Types.Mixed, required: true },
  totalAmount: { type: Number, required: true },
  discountCode: { type: String, required: false },
  tags: { type: [String], required: false },
  shippingAddress: { type: Schema.Types.Mixed, required: false },
  approvedByUserId: { type: String, required: false },
  approvalNotes: { type: [String], required: false },
  approvalReason: { type: String, required: false },
  shippingCarrier: { type: String, required: false },
  shippingTrackingNumber: { type: String, required: false },
  shippingPackageIds: { type: [String], required: false },
  __prophet_state: { type: String, required: true, default: 'created' },
}, { collection: 'orders', strict: false });
OrderSchema.index({ orderId: 1 }, { unique: true });
export const OrderModel: Model<OrderDocument> = model<OrderDocument>('Order', OrderSchema);

export interface OrderStateHistoryDocument extends Record<string, unknown> {
  orderId: string;
  transitionId: string;
  fromState: string;
  toState: string;
  occurredAt?: string;
}

const OrderStateHistorySchema = new Schema<OrderStateHistoryDocument>({
  orderId: { type: String, required: true },
  transitionId: { type: String, required: true },
  fromState: { type: String, required: true },
  toState: { type: String, required: true },
  occurredAt: { type: String, required: true, default: () => new Date().toISOString() },
}, { collection: 'orders_state_history', strict: false });
OrderStateHistorySchema.index({ orderId: 1 });
export const OrderStateHistoryModel: Model<OrderStateHistoryDocument> = model<OrderStateHistoryDocument>('OrderStateHistory', OrderStateHistorySchema);

export interface UserDocument extends Record<string, unknown> {
  userId: string;
  email: string;
}

const UserSchema = new Schema<UserDocument>({
  userId: { type: String, required: true },
  email: { type: String, required: true },
}, { collection: 'users', strict: false });
UserSchema.index({ userId: 1 }, { unique: true });
export const UserModel: Model<UserDocument> = model<UserDocument>('User', UserSchema);
