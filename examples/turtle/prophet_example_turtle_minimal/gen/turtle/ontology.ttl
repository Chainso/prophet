# Code generated by prophet-cli. DO NOT EDIT.
# Source: canonical IR projection in Prophet Turtle format

@prefix prophet: <http://prophet.platform/ontology#> .
@prefix std:     <http://prophet.platform/standard-types#> .
@prefix support_local: <http://prophet.platform/local/support_local#> .
@prefix sh:      <http://www.w3.org/ns/shacl#> .
@prefix xsd:     <http://www.w3.org/2001/XMLSchema#> .

# ============================================================
# Local Ontology
# ============================================================

support_local:ont_support_local a prophet:LocalOntology ;
  prophet:name "support_local" ;
  prophet:description "Minimal support ontology used for Turtle target examples." .

# ============================================================
# Custom Types
# ============================================================

support_local:type_email a prophet:CustomType ;
  prophet:name "Email" ;
  prophet:derivedFrom std:String ;
  prophet:hasConstraint support_local:type_email_constraint ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Constraint Shapes
# ============================================================

support_local:type_email_constraint a sh:NodeShape ;
  sh:property [ sh:path sh:value ; sh:pattern "^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$" ] .

# ============================================================
# Struct Types
# ============================================================

support_local:struct_user_ref a prophet:StructType ;
  prophet:name "UserRef" ;
  prophet:inLocalOntology support_local:ont_support_local ;
  prophet:hasProperty support_local:fld_struct_user_ref_email ;
  prophet:hasProperty support_local:fld_struct_user_ref_user_id .

support_local:fld_struct_user_ref_email a prophet:PropertyDefinition ;
  prophet:name "email" ;
  prophet:fieldKey "email" ;
  prophet:minCardinality 0 ;
  prophet:maxCardinality 1 ;
  prophet:valueType support_local:type_email ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_struct_user_ref_user_id a prophet:PropertyDefinition ;
  prophet:name "userId" ;
  prophet:fieldKey "userId" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Object Models
# ============================================================

support_local:obj_ticket a prophet:ObjectModel ;
  prophet:name "Ticket" ;
  prophet:inLocalOntology support_local:ont_support_local ;
  prophet:hasProperty support_local:fld_ticket_assignee ;
  prophet:hasProperty support_local:fld_ticket_id ;
  prophet:hasProperty support_local:fld_ticket_tags ;
  prophet:hasProperty support_local:fld_ticket_title ;
  prophet:hasPossibleState support_local:state_ticket_new ;
  prophet:hasPossibleState support_local:state_ticket_triaged ;
  prophet:initialState support_local:state_ticket_new ;
  prophet:hasPrimaryKey support_local:obj_ticket_primary_key ;
  prophet:hasDisplayKey support_local:obj_ticket_display_key .

support_local:fld_ticket_assignee a prophet:PropertyDefinition ;
  prophet:name "assignee" ;
  prophet:fieldKey "assignee" ;
  prophet:minCardinality 0 ;
  prophet:maxCardinality 1 ;
  prophet:valueType support_local:struct_user_ref ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_ticket_id a prophet:PropertyDefinition ;
  prophet:name "id" ;
  prophet:fieldKey "id" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_ticket_tags a prophet:PropertyDefinition ;
  prophet:name "tags" ;
  prophet:fieldKey "tags" ;
  prophet:minCardinality 0 ;
  prophet:valueType support_local:fld_ticket_tags_list_type ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_ticket_title a prophet:PropertyDefinition ;
  prophet:name "title" ;
  prophet:fieldKey "title" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:obj_ticket_primary_key a prophet:KeyDefinition ;
  prophet:name "Ticket Primary Key" ;
  prophet:inLocalOntology support_local:ont_support_local ;
  prophet:hasKeyPart support_local:obj_ticket_primary_part_0 .

support_local:obj_ticket_primary_part_0 a prophet:KeyPart ;
  prophet:name "PK part 0" ;
  prophet:partIndex "0"^^xsd:nonNegativeInteger ;
  prophet:partProperty support_local:fld_ticket_id ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:obj_ticket_display_key a prophet:KeyDefinition ;
  prophet:name "Ticket Display Key" ;
  prophet:inLocalOntology support_local:ont_support_local ;
  prophet:hasKeyPart support_local:obj_ticket_display_part_0 .

support_local:obj_ticket_display_part_0 a prophet:KeyPart ;
  prophet:name "DK part 0" ;
  prophet:partIndex "0"^^xsd:nonNegativeInteger ;
  prophet:partProperty support_local:fld_ticket_id ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:state_ticket_new a prophet:State ;
  prophet:name "New" ;
  prophet:stateOf support_local:obj_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:state_ticket_triaged a prophet:State ;
  prophet:name "Triaged" ;
  prophet:stateOf support_local:obj_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:trans_ticket_triage a prophet:Transition ;
  prophet:name "Triage" ;
  prophet:transitionOf support_local:obj_ticket ;
  prophet:fromState support_local:state_ticket_new ;
  prophet:toState support_local:state_ticket_triaged ;
  prophet:hasProperty support_local:trans_ticket_triage__from_state ;
  prophet:hasProperty support_local:trans_ticket_triage__pk__fld_ticket_id ;
  prophet:hasProperty support_local:trans_ticket_triage__to_state ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:trans_ticket_triage__from_state a prophet:PropertyDefinition ;
  prophet:name "fromState" ;
  prophet:fieldKey "fromState" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:trans_ticket_triage__pk__fld_ticket_id a prophet:PropertyDefinition ;
  prophet:name "id" ;
  prophet:fieldKey "id" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:trans_ticket_triage__to_state a prophet:PropertyDefinition ;
  prophet:name "toState" ;
  prophet:fieldKey "toState" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Action Inputs
# ============================================================

support_local:ain_triage_ticket a prophet:ActionInput ;
  prophet:name "TriageTicketCommand" ;
  prophet:inLocalOntology support_local:ont_support_local ;
  prophet:hasProperty support_local:fld_ain_triage_ticket_ticket .

support_local:fld_ain_triage_ticket_ticket a prophet:PropertyDefinition ;
  prophet:name "ticket" ;
  prophet:fieldKey "ticket" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType support_local:fld_ain_triage_ticket_ticket_object_ref ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Actions
# ============================================================

support_local:act_triage_ticket a prophet:Process ;
  prophet:name "triageTicket" ;
  prophet:acceptsInput support_local:ain_triage_ticket ;
  prophet:producesEvent support_local:aout_triage_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Signals
# ============================================================

support_local:aout_triage_ticket a prophet:Signal ;
  prophet:name "TriageTicketResult" ;
  prophet:hasProperty support_local:fld_aout_triage_ticket_new_state ;
  prophet:hasProperty support_local:fld_aout_triage_ticket_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_aout_triage_ticket_new_state a prophet:PropertyDefinition ;
  prophet:name "newState" ;
  prophet:fieldKey "newState" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_aout_triage_ticket_ticket a prophet:PropertyDefinition ;
  prophet:name "ticket" ;
  prophet:fieldKey "ticket" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType support_local:fld_aout_triage_ticket_ticket_object_ref ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:sig_ticket_created a prophet:Signal ;
  prophet:name "TicketCreated" ;
  prophet:hasProperty support_local:fld_sig_ticket_created_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_sig_ticket_created_ticket a prophet:PropertyDefinition ;
  prophet:name "ticket" ;
  prophet:fieldKey "ticket" ;
  prophet:minCardinality 1 ;
  prophet:maxCardinality 1 ;
  prophet:valueType support_local:fld_sig_ticket_created_ticket_object_ref ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Triggers
# ============================================================

support_local:trg_on_ticket_created a prophet:EventTrigger ;
  prophet:name "onTicketCreated" ;
  prophet:listensTo support_local:sig_ticket_created ;
  prophet:invokes support_local:act_triage_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Object Reference Types
# ============================================================

support_local:fld_ain_triage_ticket_ticket_object_ref a prophet:ObjectReference ;
  prophet:name "FldAinTriageTicketTicket" ;
  prophet:referencesObjectModel support_local:obj_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_aout_triage_ticket_ticket_object_ref a prophet:ObjectReference ;
  prophet:name "FldAoutTriageTicketTicket" ;
  prophet:referencesObjectModel support_local:obj_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

support_local:fld_sig_ticket_created_ticket_object_ref a prophet:ObjectReference ;
  prophet:name "FldSigTicketCreatedTicket" ;
  prophet:referencesObjectModel support_local:obj_ticket ;
  prophet:inLocalOntology support_local:ont_support_local .

# ============================================================
# Derived List Types
# ============================================================

support_local:fld_ticket_tags_list_type a prophet:ListType ;
  prophet:name "FldTicketTagsList" ;
  prophet:itemType std:String ;
  prophet:inLocalOntology support_local:ont_support_local .
